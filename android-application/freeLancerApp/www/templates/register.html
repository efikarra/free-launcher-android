<ion-view view-title="Register" name="register-view">
    <ion-content class="padding">
        <form name="registerForm" novalidate ng-submit="registerForm.$valid && saveUser()">
            <div class="item item-divider">
                Registration form
            </div>

            <div class="list list-inset">
                <label class="item item-input item-floating-label">
                    <span class="input-label">Username</span>
                    <input type="text" placeholder="Username" name="username" ng-model="user.username" required ng-maxlength="50">
                </label>
                <div ng-messages="registerForm.username.$error" class="form-errors" ng-if="registerForm.username.$touched">
                    <div class="form-error" ng-message="required">Please enter your username</div>
                    <div class="form-error" ng-message="maxlength">Username should be at most 50 characters</div>
                    <div ng-messages-include="templates/messages.html">
                    </div>
                </div>



                <label class="item item-input item-floating-label">
                    <span class="input-label">Password</span>
                    <input type="password" placeholder="Password" id="password" name="password" ng-model="user.password" required ng-maxlength="100">
                </label>
                <div ng-messages="registerForm.password.$error" class="form-errors" ng-if="registerForm.password.$touched">
                    <div class="form-error" ng-message="required">Please enter your Password</div>
                    <div ng-messages-include="templates/messages.html"></div>

                </div>

                <label class="item item-input item-floating-label">
                    <span class="input-label">Confirm Password</span>
                    <input type="password" placeholder="Confirm Password" id="confirmpwd" name="confirmpwd" ng-model="confirmpwd" match="user.password" required ng-maxlength="100">
                </label>
                <div ng-messages="registerForm.confirmpwd.$error" class="form-errors" ng-if="registerForm.confirmpwd.$touched">
                    <div class="form-error" ng-message="mismatch">Passwords have to match </div>
                    <div class="form-error" ng-message="maxlength">Password should be at most 100 characters</div>
                    <div ng-messages-include="templates/messages.html"></div>
                </div>

                <label class="item item-input item-floating-label">
                    <span class="input-label">First name</span>
                    <input type="text" placeholder="First name" name="firstname" ng-model="user.firstname" required ng-maxlength="100">
                </label>
                <div ng-messages="registerForm.firstname.$error" class="form-errors" ng-if="registerForm.firstname.$touched">
                    <div class="form-error" ng-message="required">Please enter your first name</div>
                    <div class="form-error" ng-message="maxlength">First name should be at most 100 characters</div>
                    <div ng-messages-include="templates/messages.html"></div>

                </div>
                <label class="item item-input item-floating-label">
                    <span class="input-label">Last name</span>
                    <input type="text" placeholder="Last name" name="lastname" ng-model="user.lastname" required ng-maxlength="100">
                </label>
                <div ng-messages="registerForm.lastname.$error" class="form-errors" ng-if="registerForm.lastname.$touched">
                    <div class="form-error" ng-message="required">Please enter your last name</div>
                    <div class="form-error" ng-message="maxlength">Last name should be at most 100 characters</div>
                    <div ng-messages-include="templates/messages.html"></div>
                </div>
                <label class="item item-input item-floating-label">
                    <span class="input-label">Email</span>
                    <input type="email" placeholder="Email" name="email" ng-model="user.email" required ng-maxlength="80">
                </label>
                <div ng-messages="registerForm.email.$error" class="form-errors" ng-show="registerForm.email.$touched">
                    <div class="form-error" ng-message="maxlength">Email should be at most 80 characters</div>
                    <div class="form-error" ng-message="required">Please enter your Email</div>

                    <div ng-messages-include="templates/messages.html"></div>
                </div>

                <label class="item item-input item-select">
                    <div class="input-label">
                        Role - Select
                    </div>
                    <select id="select" ng-model=user.role ng-change=roleSelected(user.role)>
                        <option value="EMPLOYEE_ROLE">Employee</option>
                        <option value="EMPLOYER_ROLE">Employer</option>
                    </select>
                </label>
                <div class="list card" ng-show="user.role=='EMPLOYEE_ROLE'">
                    <div class="item item-divider" style="background-color: #FFFFEB">
                        Choose your qualifications
                    </div>
                    <div class="nested" ng-controller="QualificationsBoxCtrl">
                        <div class="item-list">
                            <div class="item item-checkbox item-text-wrap" ng-repeat="qualification in qualifications track by qualification.qualId">
                                <label class="checkbox">
                                    <input type="checkbox" checklist-model="user.qualifications" checklist-value="qualification" checklist-comparator="compareFn"></input>
                                </label>
                                <br>
                                <strong>{{qualification.title}}</strong>
                                <div style="font-size:small">{{qualification.description}}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <button name="subm" class="button button-positive" ng-disabled="!registerForm.$valid" type="submit">Register</button>

            </div>
        </form>
    </ion-content>
</ion-view>